import{l as n,q as c,g as b,w as t,t as E,o as V,v as l,B as i,ce as x,E as F}from"./index-DNCsKXf1.js";import{E as y,a as U}from"./el-form-item-C65WDSzX.js";import{_ as P,E as k}from"./_plugin-vue_export-helper-CDt8arRA.js";import{E as q}from"./el-input-Bh-bfSTL.js";import{P as B}from"./PageContainer-xDSSCOWA.js";import"./_baseClone-j5CFl0Dx.js";const C={__name:"UserPassword",setup(I){const r=n({old_pwd:"",new_pwd:"",re_pwd:""}),d=n(),u=c(),_={old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:6,max:15,message:"密码长度在6到15位",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"密码长度在6到15位",trigger:"blur"},{validator:(p,e,o)=>{e===r.value.old_pwd?o(new Error("新密码不能与原密码相同")):o()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{min:6,max:15,message:"密码长度在6到15位",trigger:"blur"},{validator:(p,e,o)=>{e!==r.value.new_pwd?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]},w=E(),g=async()=>{await d.value.validate(),await x(r.value),F.success("修改密码成功"),u.setUser({}),u.setToken(""),w.push("/login")},f=()=>{d.value.resetFields()};return(p,e)=>{const o=q,a=U,m=k,v=y;return V(),b(B,{title:"修改密码"},{default:t(()=>[l(v,{model:r.value,rules:_,ref_key:"pwdFormRef",ref:d,"label-width":"100px",class:"demo-ruleForm",style:{width:"50%"}},{default:t(()=>[l(a,{label:"原密码",prop:"old_pwd"},{default:t(()=>[l(o,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value.old_pwd=s),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1}),l(a,{label:"新密码",prop:"new_pwd"},{default:t(()=>[l(o,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.new_pwd=s),type:"password",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),l(a,{label:"确认密码",prop:"re_pwd"},{default:t(()=>[l(o,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.re_pwd=s),type:"password",placeholder:"请输入确认密码"},null,8,["modelValue"])]),_:1}),l(a,null,{default:t(()=>[l(m,{type:"primary",onClick:g},{default:t(()=>[...e[3]||(e[3]=[i("修改密码",-1)])]),_:1}),l(m,{onClick:f},{default:t(()=>[...e[4]||(e[4]=[i("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}},z=P(C,[["__scopeId","data-v-87a11332"]]);export{z as default};
//# sourceMappingURL=UserPassword-CPFQASmo.js.map
