import{l as e,q as l,g as a,w as r,t as d,o as s,v as o,B as t,ce as u,E as p}from"./index.BmsgrFcj.js";import{E as m,a as i}from"./el-form-item.DwlSsYlR.js";import{_ as n,E as w}from"./_plugin-vue_export-helper.DnIr6MF_.js";import{E as _}from"./el-input.hbMfxXk5.js";import{P as g}from"./PageContainer.DXd6b4f5.js";import"./_baseClone.BqUJpUxs.js";const f=n({__name:"UserPassword",setup(n){const f=e({old_pwd:"",new_pwd:"",re_pwd:""}),v=e(),c=l(),b={old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:6,max:15,message:"密码长度在6到15位",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"密码长度在6到15位",trigger:"blur"},{validator:(e,l,a)=>{l===f.value.old_pwd?a(new Error("新密码不能与原密码相同")):a()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{min:6,max:15,message:"密码长度在6到15位",trigger:"blur"},{validator:(e,l,a)=>{l!==f.value.new_pwd?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]},V=d(),y=async()=>{await v.value.validate(),await u(f.value),p.success("修改密码成功"),c.setUser({}),c.setToken(""),V.push("/login")},h=()=>{v.value.resetFields()};return(e,l)=>{const d=_,u=i,p=w,n=m;return s(),a(g,{title:"修改密码"},{default:r(()=>[o(n,{model:f.value,rules:b,ref_key:"pwdFormRef",ref:v,"label-width":"100px",class:"demo-ruleForm",style:{width:"50%"}},{default:r(()=>[o(u,{label:"原密码",prop:"old_pwd"},{default:r(()=>[o(d,{modelValue:f.value.old_pwd,"onUpdate:modelValue":l[0]||(l[0]=e=>f.value.old_pwd=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1}),o(u,{label:"新密码",prop:"new_pwd"},{default:r(()=>[o(d,{modelValue:f.value.new_pwd,"onUpdate:modelValue":l[1]||(l[1]=e=>f.value.new_pwd=e),type:"password",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),o(u,{label:"确认密码",prop:"re_pwd"},{default:r(()=>[o(d,{modelValue:f.value.re_pwd,"onUpdate:modelValue":l[2]||(l[2]=e=>f.value.re_pwd=e),type:"password",placeholder:"请输入确认密码"},null,8,["modelValue"])]),_:1}),o(u,null,{default:r(()=>[o(p,{type:"primary",onClick:y},{default:r(()=>[...l[3]||(l[3]=[t("修改密码",-1)])]),_:1}),o(p,{onClick:h},{default:r(()=>[...l[4]||(l[4]=[t("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}},[["__scopeId","data-v-87a11332"]]);export{f as default};
