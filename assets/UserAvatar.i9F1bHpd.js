import{q as a,l as e,g as s,w as r,o as l,v as t,x as o,J as u,K as c,y as i,b2 as n,B as p,c4 as d,c5 as _,E as f}from"./index.BmsgrFcj.js";import{_ as m,E as v}from"./_plugin-vue_export-helper.DnIr6MF_.js";import{E as g}from"./el-progress.CsuDImkU.js";import{P as y}from"./PageContainer.DXd6b4f5.js";import"./_baseClone.BqUJpUxs.js";const k=["src"],j=m({__name:"UserAvatar",setup(m){const j=a(),w=e(j.user.user_pic),x=e(),C=a=>{const e=new FileReader;e.readAsDataURL(a.raw),e.onload=a=>{w.value=a.target.result}},b=async()=>{await _(w.value),await j.getUser(),f.success("更新头像成功")};return(a,e)=>{const _=c,f=g,m=v;return l(),s(y,{title:"更换头像"},{default:r(()=>[t(f,{class:"avatar-uploader","show-file-list":!1,"auto-upload":!1,ref_key:"uploadRef",ref:x,"on-change":C},{default:r(()=>[w.value?(l(),u("img",{key:0,src:w.value,class:"avatar"},null,8,k)):(l(),s(_,{key:1,class:"avatar-uploader-icon"},{default:r(()=>[t(i(n))]),_:1}))]),_:1},512),e[3]||(e[3]=o("br",null,null,-1)),t(m,{onClick:e[0]||(e[0]=a=>x.value.$el.querySelector("input").click()),type:"primary",icon:i(n),size:"large"},{default:r(()=>[...e[1]||(e[1]=[p("选择图片",-1)])]),_:1},8,["icon"]),t(m,{onClick:b,type:"success",icon:i(d),size:"large"},{default:r(()=>[...e[2]||(e[2]=[p("上传头像",-1)])]),_:1},8,["icon"])]),_:1})}}},[["__scopeId","data-v-aa54e375"]]);export{j as default};
