{"version":3,"file":"UserProfile-CMgUYNhC.js","sources":["../../src/views/user/UserProfile.vue"],"sourcesContent":["<script setup>\n    import PageContainer from '@/components/PageContainer.vue'\n    import {ref} from 'vue'\n    import {useUserStore} from '@/stores' \n    import {userUpdateInfoService} from '@/api/user'\n    import {ElMessage} from 'element-plus'\n\n\n    const {user:{email,id,nickname,username},getUser} = useUserStore()\n\n\n    const formRef = ref()\n\n\n    //在使用仓库中数据的初始值(无需响应式)结构无问题\n    const form = ref({\n       id,\n       username,\n       nickname,\n       email\n    })\n\n    const rules = ref({\n        nickName:[\n            {required:true,message:'请输入用户昵称',trigger:'blur'},\n            {pattern:/^\\S{2,10}$/,message:'用户昵称必须是2-10位非空字符',trigger:'blur'}\n        ],\n        email:[\n            {required:true,message:'请输入用户邮箱',trigger:'blur'},\n            {type:'email',message:'请输入正确的邮箱格式',trigger:'blur'}\n        ]\n    })\n\n    const submitForm = async()=>{\n        //等待校验结果\n        await formRef.value.validate()\n        //调用接口更新用户信息\n        await userUpdateInfoService(form.value)\n        //通知user模块进行数据更新\n        getUser()\n        //提示用户\n        ElMessage.success('更新用户信息成功')\n    }\n\n</script>\n\n<template>\n    <page-container title=\"基本资料\">\n        <!-- 表单部分 -->\n          <template #default>\n            <el-form style=\"width:50%\" ref=\"formRef\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\n            <el-form-item label=\"登录名称\" >\n                <el-input v-model=\"form.username\" disabled></el-input>\n            </el-form-item>\n            <el-form-item label=\"用户昵称\" prop=\"nickname\">\n                <el-input v-model=\"form.nickname\"></el-input> \n            </el-form-item>\n            <el-form-item label=\"用户邮箱\" prop=\"email\">\n                <el-input v-model=\"form.email\"></el-input>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"submitForm\">提交修改</el-button>\n            </el-form-item>\n            </el-form>\n         </template>\n\n    </page-container> \n</template>"],"names":["email","id","nickname","username","getUser","useUserStore","formRef","ref","form","rules","submitForm","userUpdateInfoService","ElMessage","_createBlock","PageContainer","_createVNode","_component_el_form","_component_el_form_item","_component_el_input","_cache","$event","_component_el_button"],"mappings":"sXAQI,KAAM,CAAC,KAAK,CAAC,MAAAA,EAAM,GAAAC,EAAG,SAAAC,EAAS,SAAAC,CAAQ,EAAE,QAAAC,CAAO,EAAIC,EAAY,EAG1DC,EAAUC,EAAG,EAIbC,EAAOD,EAAI,CACd,GAAAN,EACA,SAAAE,EACA,SAAAD,EACA,MAAAF,CACP,CAAK,EAEKS,EAAQF,EAAI,CACd,SAAS,CACL,CAAC,SAAS,GAAK,QAAQ,UAAU,QAAQ,MAAM,EAC/C,CAAC,QAAQ,aAAa,QAAQ,mBAAmB,QAAQ,MAAM,CAC3E,EACQ,MAAM,CACF,CAAC,SAAS,GAAK,QAAQ,UAAU,QAAQ,MAAM,EAC/C,CAAC,KAAK,QAAQ,QAAQ,aAAa,QAAQ,MAAM,CAC7D,CACA,CAAK,EAEKG,EAAa,SAAS,CAExB,MAAMJ,EAAQ,MAAM,SAAQ,EAE5B,MAAMK,EAAsBH,EAAK,KAAK,EAEtCJ,EAAO,EAEPQ,EAAU,QAAQ,UAAU,CAChC,iDAKAC,EAmBiBC,EAAA,CAnBD,MAAM,QAAM,CAEX,UACT,IAaU,CAbVC,EAaUC,EAAA,CAbD,MAAA,CAAA,MAAA,KAAA,UAAsB,UAAJ,IAAIV,EAAW,MAAOE,EAAA,MAAO,MAAOC,EAAA,MAAO,cAAY,oBAClF,IAEe,CAFfM,EAEeE,EAAA,CAFD,MAAM,MAAM,EAAA,WACtB,IAAsD,CAAtDF,EAAsDG,EAAA,CAAnC,WAAAV,EAAA,MAAK,SAAL,sBAAAW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAZ,EAAA,MAAK,SAAQY,GAAE,SAAA,mCAEtCL,EAEeE,EAAA,CAFD,MAAM,OAAO,KAAK,uBAC5B,IAA6C,CAA7CF,EAA6CG,EAAA,CAA1B,WAAAV,EAAA,MAAK,SAAL,sBAAAW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAZ,EAAA,MAAK,SAAQY,mCAEpCL,EAEeE,EAAA,CAFD,MAAM,OAAO,KAAK,oBAC5B,IAA0C,CAA1CF,EAA0CG,EAAA,CAAvB,WAAAV,EAAA,MAAK,MAAL,sBAAAW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAZ,EAAA,MAAK,MAAKY,mCAEjCL,EAEeE,EAAA,KAAA,WADX,IAA8D,CAA9DF,EAA8DM,EAAA,CAAnD,KAAK,UAAW,QAAOX,cAAY,IAAI,CAAA,GAAAS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAJ,OAAI,EAAA"}